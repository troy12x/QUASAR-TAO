# =============================================================================
# QUASAR-SUBNET Environment Variables Template
# =============================================================================
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# =============================================================================
# Database Configuration
# =============================================================================
# For local development (SQLite - no setup needed)
# DATABASE_URL=sqlite:///./quasar_validator.db

# For production (PostgreSQL)
# Example: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://postgres:password@localhost:5432/quasar_db

# =============================================================================
# Validator API Configuration
# =============================================================================
# API URL for validators and miners to connect to
# For production: https://quasar-validator-api.onrender.com
# For local testing: http://localhost:8000
VALIDATOR_API_URL=http://localhost:8000

# =============================================================================
# Miner Configuration (REQUIRED for miners)
# =============================================================================
# GitHub Personal Access Token with 'repo' scope
# REQUIRED for miners to fork repositories
# Get from: https://github.com/settings/tokens
# Permissions needed: repo (Full control of private repositories)
GITHUB_TOKEN=your_github_token_here

# GitHub username
# REQUIRED for miners
GITHUB_USERNAME=your_github_username

# Optional: Custom fork name (defaults to flash-linear-attention)
GITHUB_FORK_NAME=flash-linear-attention

# Target sequence length for optimization (default: 100000)
# Higher values = higher league multipliers (1M = 3.0x multiplier)
TARGET_SEQUENCE_LENGTH=100000

# Number of optimization iterations (default: 100)
AGENT_ITERATIONS=100

# Seconds between optimization attempts (default: 300 = 5 minutes)
OPTIMIZATION_INTERVAL=300

# Context Builder Configuration (Phase 2: Full Repository Context)
# Enable full repository context injection (default: true)
USE_FULL_CONTEXT=true

# Maximum number of files to include in context (default: 50)
CONTEXT_MAX_FILES=50

# Maximum context size in characters (default: 200000, ~50K tokens)
CONTEXT_MAX_SIZE=200000

# Path to local repository (optional, for BYOC mode or local testing)
# If not set, miner will clone fork automatically
# REPO_PATH=./flash-linear-attention

# Path to expert's optimized code file (Bring-Your-Own-Code mode)
# Expert miners can provide pre-optimized code for model to review/export
# BYOC_FILE_PATH=./expert_optimized_chunk.py

# =============================================================================
# Model Configuration
# =============================================================================
# Miner model name (for code generation)
# Recommended: deepseek-ai/DeepSeek-V3.2 (or DeepSeek-V4 when available)
MINER_MODEL_NAME=deepseek-ai/DeepSeek-V3.2

# =============================================================================
# Bittensor Configuration
# =============================================================================
# Subnet NETUID
# Testnet: 383
# Mainnet: (check subnet registry)
NETUID=383

# Network: 'test' for testnet, 'finney' for mainnet
# Use 'test' for testing, 'finney' for production
SUBTENSOR_NETWORK=test

# Wallet name for miner

# Wallet name for validator

# Wallet hotkey (default: default)
WALLET_HOTKEY=default

# =============================================================================
# Validator Configuration
# =============================================================================
# Polling interval in seconds (default: 300 = 5 minutes)
POLLING_INTERVAL=300

# Enable logit verification (default: true)
ENABLE_LOGIT_VERIFICATION=true

# Reference model for inference verification
# Recommended: deepseek-ai/DeepSeek-V3.2 (or DeepSeek-V4 when available)
REFERENCE_MODEL=deepseek-ai/DeepSeek-V3.2

# Cosine similarity threshold for logit verification (default: 0.99)
COSINE_SIM_THRESHOLD=0.99

# Maximum absolute difference threshold (default: 0.1)
MAX_ABS_DIFF_THRESHOLD=0.1

# Commit-reveal settings
# Blocks until reveal (default: 100)
BLOCKS_UNTIL_REVEAL=100

# Block time in seconds (default: 12)
BLOCK_TIME_SECONDS=12

# =============================================================================
# Miner Inference Server Configuration
# =============================================================================
# Port for miner inference server (default: 8001)
# Use 8001 to avoid conflict with Validator API (8000)
MINER_INFERENCE_PORT=8001

# Model name for inference server
# Recommended: deepseek-ai/DeepSeek-V3.2 (or DeepSeek-V4 when available)
MODEL_NAME=deepseek-ai/DeepSeek-V3.2

# Device: 'cuda' for GPU, 'cpu' for CPU
DEVICE=cuda

# =============================================================================
# Server Configuration
# =============================================================================
# API server port (default: 8000)
PORT=8000

# API server host (default: 0.0.0.0)
HOST=0.0.0.0

# =============================================================================
# Docker Configuration
# =============================================================================
# Docker Hub username for pushing images
DOCKER_USERNAME=your_dockerhub_username

# =============================================================================
# Development/Testing
# =============================================================================
# Enable debug logging (default: false)
DEBUG=false

# =============================================================================
# Quick Setup Guide
# =============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Edit .env and fill in:
#    - GITHUB_TOKEN (required for miners)
#    - GITHUB_USERNAME (required for miners)
#    - DATABASE_URL (if using PostgreSQL)
#    - DOCKER_USERNAME (if building Docker images)
# 3. Set NETUID and SUBTENSOR_NETWORK for your target network
# 4. Configure wallet names if different from defaults
# 5. Start services using START_*.sh scripts or direct Python commands
